{% extends "base.html" %}

{% block content %}
<div class="header-row">
    <div>
        <a href="/profile" style="text-decoration: none; color: #666; font-size: 14px;">â† è¿”å›ä¸ªäººè®¾ç½®</a>
        <h2 style="margin: 5px 0;">ğŸ” å·²æˆæƒåº”ç”¨</h2>
        <p style="margin:0; color:#666; font-size:13px;">ç®¡ç†æ‚¨å¯ä»¥è®¿é—®æ‚¨ UniAuth è´¦å·ä¿¡æ¯çš„ç¬¬ä¸‰æ–¹åº”ç”¨</p>
    </div>
</div>

<div class="card">
    {% if apps %}
        <div style="display: flex; flex-direction: column; gap: 0;">
            {% for item in apps %}
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid #eee;">
                
                <!-- åº”ç”¨ä¿¡æ¯ -->
                <div style="display: flex; align-items: center; gap: 15px;">
                    <!-- é¦–å­—æ¯å›¾æ ‡ -->
                    <div style="width: 48px; height: 48px; border-radius: 8px; background: #e9ecef; color: #555; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold;">
                        {{ item.app.name[0]|upper }}
                    </div>
                    
                    <div>
                        <div style="font-weight: bold; font-size: 16px; color: #333;">
                            {{ item.app.name }}
                            {% if item.app.user_id == user.id %}
                            <span style="font-size: 10px; background: #d4edda; color: #155724; padding: 1px 5px; border-radius: 4px; margin-left: 5px;">å¼€å‘è€…</span>
                            {% endif %}
                        </div>
                        <div style="font-size: 12px; color: #888; margin-top: 4px;">
                            Client ID: {{ item.app.client_id }}
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 2px;">
                            æƒé™èŒƒå›´: <span style="font-family: monospace; background: #f8f9fa; padding: 0 4px;">{{ item.scopes }}</span>
                        </div>
                    </div>
                </div>

                <!-- æ’¤é”€æŒ‰é’® -->
                <form action="/settings/authorized/{{ item.app.client_id }}/revoke" method="POST" onsubmit="return confirm('ç¡®å®šè¦æ’¤é”€å¯¹ {{ item.app.name }} çš„æˆæƒå—ï¼Ÿ\n\næ’¤é”€åï¼Œè¯¥åº”ç”¨å°†æ— æ³•å†è®¿é—®æ‚¨çš„æ•°æ®ï¼Œæ‚¨åœ¨è¯¥åº”ç”¨ä¸Šçš„ç™»å½•çŠ¶æ€ä¹Ÿä¼šå¤±æ•ˆã€‚');">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-ghost" style="color: #dc3545; border-color: #dc3545; font-size: 13px;">
                        ğŸš« æ’¤é”€æˆæƒ
                    </button>
                </form>
            </div>
            {% endfor %}
        </div>
        
        <!-- åº•éƒ¨æ¸…é™¤æµ®åŠ¨æˆ–æœ€åä¸€æ¡çº¿å¤„ç† -->
        <style>div > div:last-child { border-bottom: none !important; }</style>

    {% else %}
        <div style="text-align: center; padding: 40px; color: #999;">
            <div style="font-size: 40px; margin-bottom: 10px;">ğŸ›¡ï¸</div>
            <p>æ‚¨è¿˜æ²¡æœ‰æˆæƒä»»ä½•åº”ç”¨è®¿é—®æ‚¨çš„è´¦æˆ·ã€‚</p>
        </div>
    {% endif %}
</div>
{% endblock %}